<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Prueba VR</title>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
    <script src="components/set-image.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="bg" src="img/vr-living-room.jpg" crossorigin="anonymous">
        <img id="bg-no-lights" src="img/vr-living-room-off.jpg" crossorigin="anonymous">
        <img id="black-cover" crossorigin="anonymous" src="img/black-cover-01.png">
        <img id="on" crossorigin="anonymous" src="img/on-01.png">
        <img id="off" crossorigin="anonymous" src="img/off-01.png">
        <audio id="click-sound" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
        <!-- Image link template to be reused -->
        <script id="link" type="text/html">
          <a-entity class="link"
            geometry="primitive: plane; height: 1; width: 1"
            material="shader: flat; src: ${thumb}; opacity: 0.9"
            event-set__1="_event: mousedown; scale: 1 1 1"
            event-set__2="_event: mouseup; scale: 1.2 1.2 1"
            event-set__3="_event: mouseenter; scale: 1.2 1.2 1"
            event-set__4="_event: mouseleave; scale: 1 1 1"
            set-image="on: click; target: ${target}; src: ${src}"
            sound="on: click; src: #click-sound"
            >
            </a-entity>
        </script>
      </a-assets>

      <!-- Background 360 -->
      <a-sky id="room-sky" src="#bg" rotation="0 180 0"></a-sky>

      <!-- TV  -->
      <a-entity id="tv" geometry="primitive: plane; height: 1.85; width: 3.35" position="-0.14 -0.45 -4" material="src:#black-cover">
      </a-entity>

      <!-- PC -->
      <a-entity id="pc" geometry="primitive: plane; height: 1.5; width: 2.35" position="6.75 -0.6 -7" material="src:#black-cover" rotation="-3 0 0">
      </a-entity>
      <a-entity id="pc-tablet" geometry="primitive: plane; height: 1.05; width: 1.7" position="9.1 -2 -8" material="src:#black-cover" rotation="-65 0 0">
      </a-entity>

      <!-- Interface Lights -->
      <a-entity id="lights-interface" layout="type: line; margin: 1.5" position="0.47 0.7 3.4" rotation="0 180 0">
        <a-entity template="src: #link" data-src="#bg" data-target="#room-sky" data-thumb="#on"></a-entity>
        <a-entity template="src: #link" data-src="#bg-no-lights" data-target="#room-sky" data-thumb="#off"></a-entity>
      </a-entity>

      <!-- Interface TV -->
      <a-entity id="tv-interface" layout="type: line; margin: 1.5" position="-0.9 -2.4 -4">
        <a-entity template="src: #link" data-src="visible:false" data-target="#tv" data-thumb="#on"></a-entity>
        <a-entity template="src: #link" data-src="visible:true" data-target="#tv" data-thumb="#off"></a-entity>
      </a-entity>

      <!-- Interface PC -->
      <a-entity id="tv-interface" layout="type: ; margin: 1.5" position="4.5 -2.4 -4">
        <a-entity template="src: #link" data-src="visible:false" data-target="#pc" data-thumb="#on"></a-entity>
        <a-entity template="src: #link" data-src="visible:true" data-target="#pc" data-thumb="#off"></a-entity>
      </a-entity>

      <!-- Camera + cursor -->
      <a-entity camera look-controls>
        <a-cursor id="cursor"
                  color="gray"
                  animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                  animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                  event-set__1="_event: mouseenter; color: springgreen"
                  event-set__2="_event: mouseleave; color: gray"
                  fuse="true"
                  raycaster="objects: .link"></a-cursor>
      </a-entity>
    </a-scene>
  </body>
</html>
