<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Prueba VR</title>
  <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
  <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
  <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
  <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
  <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
  <script src="components/custom-components.js"></script>
</head>

<body>
  <a-scene>
    <a-assets>
      <img id="room" src="img/vr-living-room.jpg" crossorigin="anonymous">
      <img id="theater" src="img/cinema2.jpg" crossorigin="anonymous">
      <img id="theater-icon" src="img/theater-white.png" crossorigin="anonymous">
      <img id="bg-no-lights" src="img/vr-living-room-off.jpg" crossorigin="anonymous">
      <img id="black-cover" crossorigin="anonymous" src="img/black-cover-01.png">
      <video id="game-of-thrones" src="media/got.mp4"></video>
      <video id="star-wars" src="media/star-wars.mp4"></video>
      <video id="pirates" src="media/pirates.mp4"></video>
      <audio id="click-sound" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
      <!-- Templates -->

      <!-- Image link template to be reused -->
      <script id="link" type="text/html">
        <a-entity class="link" geometry="primitive: plane; height: 1; width: 1" material="shader: flat; src: ${thumb}; opacity: 0.9" event-set__1="_event: mousedown; scale: 1 1 1" event-set__2="_event: mouseup; scale: 1.2 1.2 1" event-set__3="_event: mouseenter; scale: 1.2 1.2 1" event-set__4="_event: mouseleave; scale: 1 1 1" sound="on: click; src: #click-sound">
        </a-entity>
      </script>

      <!-- Room mode template -->
      <script id="room-mode" type="text/html">

        <!-- Theater Mode -->
        <a-plane position="-0.15 1 -3" rotation="0 0 0" color="#fff" opacity="0.8" transparent="true"></a-plane>
        <a-ring class="interactive" radius-inner="0.22" radius-outer="0.25" position="-0.15 1 -3" rotation="0 0 0" color="#fff" opacity="0.8" transparent="true" mouse-highlight sound="on: click; src: #click-sound" onclick="switchToTheaterMode()">
          <a-image src="#theater-icon" width="0.3" height="0.3" position="0 0 0.01" transparent="true"></a-image>
        </a-ring>
        <!-- Lights controls -->
        <a-entity id="lights-control">
          <!-- Menu background -->
          <a-plane color="#333" height="2" width="2.5" rotation="0 90 0" position="-3.2 0.1 0" opacity="0.8"></a-plane>
          <!-- Header -->
          <a-plane width="2.300" height="0.440" position="-2.8 0.8 0" rotation="0 90 0" opacity="0">
            <a-text value="CONTROL DE LUCES" color="#FFF" font="exo2bold" align="center" width="5"></a-text>
          </a-plane>
          <!-- Status -->
          <a-text value="comprobando estado..." color="#FFF275" font="exo2bold" align="center" rotation="0 90 0" position="-2.9 0.5 0" scale="0.6 0.6 0.6"></a-text>
          <!-- Options -->
          <a-plane class="interactive" width="2.300" height="0.440" position="-2.9 0.2 0" rotation="0 90 0" opacity="0" mouse-highlight sound="on: click; src: #click-sound" onclick="turnLightsOff()">
            <a-text value="APAGAR" color="#FFF" font="exo2bold" align="center" width="4"></a-text>
          </a-plane>
          <a-plane class="interactive" width="2.300" height="0.440" position="-2.9 -0.1 0" rotation="0 90 0" opacity="0" mouse-highlight sound="on: click; src: #click-sound" onclick="smartBrightness()">
            <a-text value="ATENUAR" color="#FFF" font="exo2bold" align="center" width="4"></a-text>
          </a-plane>
          <a-plane class="interactive" width="2.300" height="0.440" position="-2.9 -0.4 0" rotation="0 90 0" opacity="0" mouse-highlight sound="on: click; src: #click-sound" onclick="turnLightsOn()">
            <a-text value="ENCENDER" color="#FFF" font="exo2bold" align="center" width="4"></a-text>
          </a-plane>
        </a-entity>

        <!-- Media controls -->
        <a-entity id="media-control">
          <!-- Menu background -->
          <a-plane color="#333" height="2" width="3" rotation="0 270 0" position="3.2 0.1 0" opacity="0.8"></a-plane>
          <!-- Header -->
          <a-plane width="2.300" height="0.440" position="2.8 0.8 0" rotation="0 270 0" opacity="0">
            <a-text value="ENTRETENIMIENTO" color="#FFF" font="exo2bold" align="center" width="5"></a-text>
          </a-plane>
          <!-- Status -->
          <a-text value="selecciona un archivo para reproducirlo" color="#FFF275" font="exo2bold" align="center" rotation="0 270 0" position="2.9 0.5 0" scale="0.6 0.6 0.6"></a-text>
          <!-- Options -->
          <a-plane class="interactive" width="2.300" height="0.440" position="2.9 0.2 0" rotation="0 270 0" opacity="0" mouse-highlight sound="on: click; src: #click-sound" onclick="contentLoad('tronos')">
            <a-text value="Juego de tronos" color="#FFF" font="exo2bold" align="center" width="4"></a-text>
          </a-plane>
          <a-plane class="interactive" width="2.300" height="0.440" position="2.9 -0.1 0" rotation="0 270 0" opacity="0" mouse-highlight sound="on: click; src: #click-sound" onclick="contentLoad('piratas')">
            <a-text value="Piratas del Caribe" color="#FFF" font="exo2bold" align="center" width="4"></a-text>
          </a-plane>
          <a-plane class="interactive" width="2.300" height="0.440" position="2.9 -0.4 0" rotation="0 270 0" opacity="0" mouse-highlight sound="on: click; src: #click-sound" onclick="turnLightsOn('star')">
            <a-text value="Star Wars" color="#FFF" font="exo2bold" align="center" width="4"></a-text>
          </a-plane>
        </a-entity>
        <!-- TV  -->
        <a-entity id="tv" geometry="primitive: plane; height: 1.85; width: 3.35" position="-0.14 -0.45 -4" material="src:#black-cover">
        </a-entity>
        <!--        <a-video src="#pirates" height="1.85" width="3.35" position="-0.14 -0.45 -4"></a-video>-->
        <!-- PC -->
        <a-entity id="pc" geometry="primitive: plane; height: 1.5; width: 2.35" position="6.75 -0.6 -7" material="src:#black-cover" rotation="-3 0 0">
        </a-entity>
        <a-entity id="pc-tablet" geometry="primitive: plane; height: 1.05; width: 1.7" position="9.1 -2 -8" material="src:#black-cover" rotation="-65 0 0">
        </a-entity>
        <!-- Interface TV -->
        <!--        <a-entity id="tv-interface" layout="type: line; margin: 1.5" position="-0.9 -2.4 -4">-->
        <!--
          <a-entity onclick="changeToTheaterMode()" template="src: #link" data-src="visible:false" data-target="#tv" data-thumb="#on"></a-entity>
          <a-entity template="src: #link" data-src="visible:true" data-target="#tv" data-thumb="#off"></a-entity>
-->
        <!--</a-entity>-->
      </script>

      <!-- Theater mode template -->
      <script id="theater-mode" type="text/html">
        <a-entity id="light-control">
          <a-text value="eyou" color="#BBB" rotation="0 90 0" position="0 0 -3" scale="1.5 1.5 1.5"></a-text>
        </a-entity>
        <a-entity id="media-control">

        </a-entity>
      </script>
    </a-assets>

    <!-- Scene elements -->
    <!-- Background 360 -->
    <a-sky id="room-bg" src="#room" rotation="0 180 0"></a-sky>
    <!-- Container for templates -->
    <a-entity id="scene-container" template="src:#room-mode"></a-entity>
    <!-- Camera + cursor -->
    <a-entity camera look-controls>
      <a-cursor id="cursor" color="gray" animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150" animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500" event-set__1="_event: mouseenter; color: springgreen" event-set__2="_event: mouseleave; color: gray" fuse="true" raycaster="objects: .link, .interactive"></a-cursor>
    </a-entity>
    <script src="components/vr-fun.js"></script>
  </a-scene>
</body>

</html>
